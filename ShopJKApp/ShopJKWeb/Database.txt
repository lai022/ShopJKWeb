CREATE TABLE CUSTOMER (
	CUSTUSERNAME VARCHAR(20) NOT NULL PRIMARY KEY ,
    	CUSTNAME VARCHAR(50) NOT NULL,
    	BIRTHDATE DATE NOT NULL,
    	TELNO VARCHAR(12) NOT NULL,
   	ADDRESS VARCHAR(500) NOT NULL,
    	EMAIL VARCHAR(254) NOT NULL,
    	PASSWORD VARCHAR(30) NOT NULL,
    	STATUS VARCHAR(1) DEFAULT 'A'
);

CREATE TABLE MANAGER (
	MANAGERUSERNAME VARCHAR(20) NOT NULL PRIMARY KEY ,
	MANAGERNAME VARCHAR(50) NOT NULL,
	BIRTHDATE DATE NOT NULL,
	TELNO VARCHAR(12) NOT NULL,
	ADDRESS VARCHAR(500) NOT NULL,
	EMAIL VARCHAR(254) NOT NULL,
	PASSWORD VARCHAR(30) NOT NULL,
	STATUS VARCHAR(1) DEFAULT 'A'
);

CREATE TABLE STAFF (
	STAFFUSERNAME VARCHAR(20) NOT NULL PRIMARY KEY ,
	STAFFNAME VARCHAR(50) NOT NULL,
	BIRTHDATE DATE NOT NULL,
	TELNO VARCHAR(12) NOT NULL,
	ADDRESS VARCHAR(500) NOT NULL,
	EMAIL VARCHAR(254) NOT NULL,
	PASSWORD VARCHAR(30) NOT NULL,
	STATUS VARCHAR(1) DEFAULT 'A'
);

CREATE TABLE CATEGORY (
	CATEGORYID INT NOT NULL PRIMARY KEY
	GENERATED ALWAYS AS IDENTITY
	(START WITH 1,INCREMENT BY 1),
	CATEGORYTYPE VARCHAR(100) NOT NULL,
	CATEGORYDESC VARCHAR(3000)
);

CREATE TABLE ITEM (
	ITEMID INT NOT NULL PRIMARY KEY
	GENERATED ALWAYS AS IDENTITY
	(START WITH 1, INCREMENT BY 1),
	ITEMNAME VARCHAR(50) NOT NULL,
	ITEMDESC VARCHAR(3000),
	ITEMPRICE FLOAT(2) NOT NULL,
	QTYINSTOCK INT NOT NULL,
	QTYSOLD INT,
	CATEGORYID INT,
	STATUS VARCHAR(1) DEFAULT 'A',
	ITEMIMG BLOB, 
	FOREIGN KEY(CATEGORYID) REFERENCES CATEGORY(CATEGORYID)
);

CREATE TABLE RECEIVER (
	RECEIVERID INT NOT NULL PRIMARY KEY
	GENERATED ALWAYS AS IDENTITY
	(START WITH 1,INCREMENT BY 1),
	RECEIVERNAME VARCHAR(30) NOT NULL,
	RECEIVERPHONE VARCHAR(12) NOT NULL,
	RECEIVERADDRESS VARCHAR(100) NOT NULL,
	CUSTUSERNAME VARCHAR(20) NOT NULL,
	FOREIGN KEY (CUSTUSERNAME) REFERENCES CUSTOMER (CUSTUSERNAME)
);

CREATE TABLE ORDERR(
	ORDERID INT NOT NULL PRIMARY KEY
	GENERATED ALWAYS AS IDENTITY
	(START WITH 1, INCREMENT BY 1),
	ORDERDATE DATE,
	RECEIVERID INT NOT NULL,
	CUSTUSERNAME VARCHAR(20) NOT NULL,
	FOREIGN KEY (RECEIVERID) REFERENCES RECEIVER (RECEIVERID),
	FOREIGN KEY (CUSTUSERNAME) REFERENCES CUSTOMER (CUSTUSERNAME)
);

CREATE TABLE REVIEW (
    REVIEWID INT NOT NULL PRIMARY KEY
    GENERATED ALWAYS AS IDENTITY
    (START WITH 1, INCREMENT BY 1),
    RATING INT,
    CUSTCOMMENT VARCHAR(100),
    REVIEWDATE DATE,
    CUSTUSERNAME VARCHAR(20) NOT NULL,
    ITEMID INT NOT NULL,
    ORDERID INT,
    STATUS INT DEFAULT 0,
    FOREIGN KEY (CUSTUSERNAME) REFERENCES CUSTOMER (CUSTUSERNAME),
    FOREIGN KEY (ITEMID) REFERENCES ITEM (ITEMID),
    FOREIGN KEY (ORDERID) REFERENCES ORDERR (ORDERID)
);

CREATE TABLE STAFF_REVIEW (
	SREVIEWID INT NOT NULL PRIMARY KEY
	GENERATED ALWAYS AS IDENTITY
	(START WITH 1, INCREMENT BY 1),
	SCOMMENT VARCHAR(100),
	SREVIEWDATE DATE,
	REVIEWID INT NOT NULL,
	FOREIGN KEY (REVIEWID) REFERENCES REVIEW (REVIEWID)
);

CREATE TABLE ORDER_ITEMS (
	ORDER_ITEMSID INT NOT NULL PRIMARY KEY
	GENERATED ALWAYS AS IDENTITY
	(START WITH 1, INCREMENT BY 1),
	ORDERID INT,
	ITEMID INT,
	QTY INT NOT NULL,
	PRICE FLOAT(2) NOT NULL,
	FOREIGN KEY (ORDERID) REFERENCES ORDERR (ORDERID),
	FOREIGN KEY (ITEMID) REFERENCES ITEM (ITEMID)
);

CREATE TABLE ORDERSTATUS (
	TRACKINGNUM INT NOT NULL PRIMARY KEY
	GENERATED ALWAYS AS IDENTITY
	(START WITH 1, INCREMENT BY 1),
	STATUS VARCHAR(50) NOT NULL,
	STATUSDATE DATE,
	ORDERID INT NOT NULL,
	FOREIGN KEY (ORDERID) REFERENCES ORDERR (ORDERID)
);

CREATE TABLE PAYMENT(
	PAYMENTID INT NOT NULL PRIMARY KEY
	GENERATED ALWAYS AS IDENTITY
	(START WITH 1, INCREMENT BY 1),
	SUBTOTAL FLOAT(2),
	TAX FLOAT(2),
	TOTALAMOUNT FLOAT(2),
	ORDERID INT NOT NULL,
	FOREIGN KEY (ORDERID) REFERENCES ORDERR (ORDERID)
);